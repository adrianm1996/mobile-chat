<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
    * Enable inline JS: add 'unsafe-inline' to default-src
    * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->
    <meta http-equiv="Content-Security-Policy" content="img-src *;">
    <link rel="stylesheet" type="text/css" href="css/registration.css" />
    <link href="https://fonts.googleapis.com/css?family=Pacifico|Lato" rel="stylesheet">
    <title>My First Node App</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</head>
<body>
    <div class="header" id="header">
        <a class="brand" href="">admisChat</a>

        <ul class="left">
            <li><input id="check" class="btn" type="button" onclick="check()" value=""></li>
            <li><input class="btn" type="submit" target="about.php" value="About"></li>
        </ul>
    </div>

    <div class="outer" id="outer">

        <div class="boxx" id="login">

            <form action="">

                <label for="email">Email ID&nbsp;&nbsp;&nbsp;</label>
                <input type="email" class="box" name="email" id="email" value="" placeholder="Email ID" onkeyup="validation()"><br>
                <p style="color:red;" id="error"><br><br><br></p>

                <label for="password">Password&nbsp;&nbsp;&nbsp;</label>
                <input type="text" class="box" name="password" id="password" value="" placeholder="Password"><br><br><br>

                <input class="button" type="button" value="Register &nbsp;" onclick="register()">

                <input type="submit" class="button" value="Submit">
            </form>
        </div>


        <div class="boxx" id="register">

            <form action="">
                <label for="name">Imię&nbsp;&nbsp;&nbsp;</label>
                <input class="box" type="text" name="name" id="nameR" value="" placeholder="Imie"><br><br><br>

                <label for="surname">Nazwisko&nbsp;&nbsp;&nbsp;</label>
                <input class="box" type="text" name="surname" id="surnameR" value="" placeholder="Nazwisko"><br><br><br>

                <label for="email">Email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input class="box" type="email" name="email" id="emailR" value="" placeholder="Email"><br><br><br>

                <label for="password">Hasło&nbsp;&nbsp;&nbsp;</label>
                <input class="box" type="text" name="password" id="passwordR" value="" placeholder="Hasło"><br><br><br>



                <input class="button" type="button" value="Login" onclick="login()">

                <input type="submit" class="button" value="Submit">
            </form>
        </div>


    </div>
    <!--<script src="/path/to/angular.js"></script>-->
    <script src="/socket.io/socket.io.js"></script>
    <!--<script src="js/require.js"></script>-->
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/server.js"></script>
    <script type="text/javascript" src="js/registration.js"></script>
    <!--<script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
    <script>
        $(function () {
            var socket = io.connect('http://admis-chat.herokuapp.com');

            $('form').submit(function () {
                if ($('#emailR').val().length > 0 && $('#passwordR').val().length > 0 &&
                    $('#nameR').val().length > 0 && $('#surnameR').val().length > 0) {
                    socket.emit('user', {
                        email: $('#emailR').val(),
                        password: $('#passwordR').val(),
                        name: $('#nameR').val(),
                        surname: $('#surnameR').val()
                    });
                    $('#nameR').val('');
                    $('#surnameR').val('');
                    $('#emailR').val('');
                    $('#passwordR').val('');
                }
                return false;
            });

            $('form').submit(function () {
                if ($('#email').val().length > 0 && $('#password').val().length > 0) {
                    socket.emit('userLogin', {
                        email: $('#email').val(),
                        password: $('#password').val()

                    });
                    $('#email').val('');
                    $('#password').val('');
                }
                return false;
            });

            socket.on('redirect', function (destination) {
                window.location.href = destination;
            });

            socket.on('er', function (er) {
                alert(er);
            });

        });
    </script>
</body>

</html>
